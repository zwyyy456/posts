---
title: "ä¾¿æ·åŒæ­¥æœ¬åœ°çš„åšå®¢æ–‡æ¡£åˆ°åšå®¢å›­"
date: 2023-06-14T14:22:30+08:00
lastmod: 2023-06-14T14:22:30+08:00 #æ›´æ–°æ—¶é—´
author: ["zwyyy456"] #ä½œè€…
categories: ["tutorial"]
tags: ["trick"]
description: "" #æè¿°
weight: # è¾“å…¥ 1 å¯ä»¥é¡¶ç½®æ–‡ç« ï¼Œç”¨æ¥ç»™æ–‡ç« å±•ç¤ºæ’åºï¼Œä¸å¡«å°±é»˜è®¤æŒ‰æ—¶é—´æ’åº
slug: ""
draft: false # æ˜¯å¦ä¸ºè‰ç¨¿
comments: false #æ˜¯å¦å±•ç¤ºè¯„è®º
showToc: true # æ˜¾ç¤ºç›®å½•
TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½•
hidemeta: false # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰
disableShare: true # åº•éƒ¨ä¸æ˜¾ç¤ºåˆ†äº«æ 
showbreadcrumbs: false #é¡¶éƒ¨æ˜¾ç¤ºå½“å‰è·¯å¾„
---
## å‰è¨€

æˆ‘å†™åšå®¢çš„åˆå¿ƒå¾ˆç®€å•ï¼Œä¸€æ˜¯ä¸€äº›è½¯ä»¶çš„é…ç½®è¿‡ç¨‹ï¼ˆé˜²æ­¢ç¬¬äºŒæ¬¡é…ç½®çš„æ—¶å€™åˆæŠ“çï¼‰ï¼›äºŒæ˜¯è®°å½•ä¸‹ä¸€ä¸‹è‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šï¼Œåœ¨ [é«˜ä¹™è¶…çš„åšå®¢](https://gaoyichao.com/Xiaotu/?book=diary&title=about) ä¸­ï¼Œæˆ‘æ›¾ç»çœ‹åˆ°ä¸€å¥è¯ï¼Œå« **"To learn, read; To know, write; To master, teach"**ã€‚

è¿‡å»äºŒåå¹´é‡Œï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ç›´æ˜¯ä½œä¸ºä¸€ä¸ªè¾“å…¥æ–¹ï¼Œåº”ä»˜è€ƒè¯•å€’æ˜¯æ²¡å•¥é—®é¢˜ï¼Œä½†ä¹Ÿä»…æ­¤è€Œå·²äº†ã€‚ä¸ºäº†æ›´å¥½åœ°ä½“ä¼šå’Œé¢†æ‚Ÿè¿™äº›çŸ¥è¯†ï¼Œæˆ‘å†³å®šå†™å†™åšå®¢ï¼Œæ—¢æ˜¯åšç¬”è®°ï¼Œä¹Ÿæ˜¯å¯¹è‡ªå·±çš„æ‰€å­¦çš„ä¸€ç§æ•´ç†å’Œè¾“å‡ºï¼Œä¹Ÿå¸Œæœ›èƒ½æœ‰æ›´å¤šåŒé“è€…çœ‹åˆ°ï¼Œä»è€Œä¸€èµ·äº¤æµå­¦ä¹ ã€å…±åŒè¿›æ­¥ã€‚

æœ€ä¸€å¼€å§‹ä¹ˆï¼Œå…¶å®æ˜¯å‘Šè¯«è‡ªå·±ï¼Œå†™åšå®¢çš„æ ¸å¿ƒåœ¨äºåŠ¨ç¬”è¾“å‡ºï¼Œè€Œä¸æ˜¯æŠ˜è…¾åšå®¢çš„ä¸»é¢˜åˆæˆ–æ˜¯å¦‚ä½•æ­å»ºåšå®¢ç«™ç‚¹ï¼Œå› æ­¤å°±æƒ³ç€é€‰æ‹©ä¸€ä¸ªç°æœ‰çš„å…¬å¼€çš„åšå®¢å¹³å°ï¼Œç»è¿‡ä¸€ç•ªæ¯”è¾ƒä¹‹ä¸‹é€‰æ‹©äº†åšå®¢å›­ã€‚è¯´æ˜¯æ¯”è¾ƒï¼Œå…¶å®ä¹Ÿæ²¡å¾—å¤ªå¤šé€‰æ‹©çš„ä½™åœ°ï¼Œé™¤äº†åšå®¢å›­ä¹Ÿå°±æ˜¯ CSDN äº†ï¼Œç„¶è€Œå¯¹äº CSDN æˆ‘å®åœ¨æ˜¯æ·±æ¶ç—›ç»ã€‚åšå®¢å›­ç›¸è¾ƒä¹‹ä¸‹å…‹åˆ¶å¾ˆå¤šï¼Œå¹¿å‘Šå°‘ï¼Œæ›´èšç„¦äºæŠ€æœ¯ï¼ŒåŸåˆ›å†…å®¹æ›´å¤šä¸”æ›´æœ‰æ·±åº¦ï¼Œè™½ç„¶ç•Œé¢ä»¥ 2023 å¹´çš„çœ¼å…‰æ¥çœ‹æ¯”è¾ƒè€åœŸäº†ï¼Œä½†åšå®¢å›­æ”¯æŒè‡ªå®šä¹‰ CSS å•Šã€‚

æ²¡é”™ï¼Œæˆ‘è¿˜æ˜¯æ— æ³•æ§åˆ¶è‡ªå·±ï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹åšå®¢å›­çš„ä¸»é¢˜ï¼Œé‰´äºæœ¬äººå¯¹å‰ç«¯ä¸€çªä¸é€šï¼Œå°±ç®—ä»¥åäº†è§£äº†ï¼Œä»¥æˆ‘è¿™ç§çº ç»“æ¥çº ç»“å»çš„æ€§å­ï¼Œè‡ªå·±åŠ¨æ‰‹å†™ä¸»é¢˜ï¼Œé€‰æ‹©é…è‰²ã€ä¸»é¢˜ã€å­—å·ç­‰ç»å¯¹æ˜¯å™©æ¢¦ï¼Œå› æ­¤ä»…é™äºåœ¨ GitHub ä¸Šæœç´¢ä»–äººåšå¥½çš„ä¸»é¢˜ï¼ŒæŒ‘äº†ä¸€ç•ªä¹‹åï¼Œç½‘ä¸Šæ¯”è¾ƒçƒ­é—¨çš„è¯¸å¦‚ Silence ä¹‹ç±»çš„ä¸»é¢˜ï¼Œæˆ‘éƒ½è§‰å¾—å¤ªèŠ±é‡Œèƒ¡å“¨äº†ï¼Œè€Œä¸”å­—ä½“å¹¶ä¸å–œæ¬¢ï¼Œæ‰¾åˆ°ä¸€ä¸ªè®¾è®¡é£æ ¼ä¸é”™çš„ï¼Œå¥ˆä½•ä¸»é¢˜åˆå¤ªä¹…æ²¡æ›´æ–°äº†ï¼Œæœ€åä½œç½¢ã€‚

æœ€åï¼Œæˆ‘è¿˜æ˜¯é€‰æ‹©äº†åšå®¢å›­è‡ªå¸¦çš„ **Coding Life** ä¸»é¢˜ï¼Œä¿®æ”¹äº†ä¸€ä¸‹ä»£ç å—çš„ CSSï¼Œä¸»è¦æ˜¯æ”¹äº†ä»£ç å—å­—ä½“ã€‚

ç„¶è€Œå†™äº†å‡ ç¯‡åšå®¢ä¹‹åï¼Œåˆå‘ç°åšå®¢å›­è‡ªå¸¦çš„ç¼–è¾‘å™¨å¤ªéš¾ç”¨äº†ã€‚è¿˜æ˜¯è¦è‡ªå·±ç°åœ¨æœ¬åœ°ç”¨ VsCode é…åˆ Markdown Preview Enhanced æ’ä»¶å†™å¥½ï¼Œå†å¤åˆ¶ç²˜è´´åˆ°åšå®¢å›­ä¸Šå‘å¸ƒï¼Œå°±è§‰å¾—æœ‰ç‚¹éº»çƒ¦ï¼Œå€’ä¸å¦‚ç”¨ Hugo æˆ–è€… Hexo äº†ï¼Œé…ç½®å¥½ä¹‹åï¼Œå†™å¥½åšå®¢å†æ•²ä¸€ä¸‹å‘½ä»¤å°±èƒ½æå®šäº†ã€‚

äºæ˜¯æˆ‘åˆåŠ¨äº†ç”¨ Hexo æˆ–è€… Hugo è‡ªå·±æ­ä¸€ä¸ªåšå®¢ç½‘ç«™çš„å¿µå¤´ï¼Œé¦–å…ˆç®€å•å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œé€‰æ‹©äº† Hugoï¼Œæ¯”èµ· Hexo æ¥è¯´ï¼Œå®ƒæ€§èƒ½é«˜ï¼Œé…ç½®èµ·æ¥æ›´æ–¹ä¾¿ï¼ŒHexo éå¸¸æµè¡Œçš„ Next ä¸»é¢˜æˆ‘ä¹Ÿå¹¶ä¸å–œæ¬¢ï¼Œå€’æ˜¯ Hugo çš„ä¸å°‘ä¸»é¢˜æˆ‘éå¸¸å–œæ¬¢ï¼Œæˆ‘ä¸ªäººåœ¨ç”¨çš„ä¸»é¢˜æ˜¯ [hugo-PaperMod](https://github.com/adityatelange/hugo-PaperMod) å’Œ [hugo-coder](https://github.com/luizdepra/hugo-coder)ï¼Œæ²¡é”™ï¼Œæˆ‘ä¸€å£æ°”æ­äº†ä¸¤ä¸ªç½‘ç«™ï¼Œåœ¨æˆ‘çœ‹æ¥ **hugo-coder** æ›´å¥½çœ‹ä¸€ç‚¹ï¼Œè€Œ **hugo-PaperMod** åŠŸèƒ½æ›´ä¸ºé½å…¨ï¼Œç”¨çš„äººæ›´å¤šï¼Œæ•™ç¨‹ä¹Ÿæ›´å¤šã€‚

ä¸¤ä¸ªåšå®¢ç½‘å€åˆ†åˆ«æ˜¯ [zwyyy456.tech](https://blog.zwyyy456.tech/) å’Œ [paper.zwyyy456.tech](https://paper.zwyyy456.tech)ã€‚

æˆ‘è¿™ä¸¤ä¸ªåŸºäº Hugo çš„åšå®¢å¯ä»¥è¯´æ˜¯çº¯ç™½å«–å®ç°çš„ï¼ŒåŸŸåæ˜¯ç™½å«–çš„ Freenom çš„ `.tk` å’Œ `.ml` åŸŸåï¼Œè‡ªåŠ¨éƒ¨ç½²æ–¹æ¡ˆæ˜¯åŸºäº GitHub å’Œ Vercel å®ç°çš„ï¼Œå°†æœ¬åœ°ä¿®æ”¹åŒæ­¥åˆ° GitHub ä¹‹åï¼ŒVercel å°±ä¼šè‡ªåŠ¨æ„å»ºç«™ç‚¹ã€‚

è¿™ä¸ªæ–¹æ¡ˆæˆ‘ç”¨äº†å¿«åŠå¹´ï¼Œæ€»ä½“ä¸Šæ¥è¯´æ˜¯å¾ˆæ»¡æ„çš„ï¼Œå†™èµ·åšå®¢æ¥éå¸¸æ–¹ä¾¿ï¼Œç«™ç‚¹é¢œå€¼ä¹Ÿå¾ˆé«˜ï¼Œå”¯ä¸€ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼ŒGoogle æˆ–è€… ç™¾åº¦åŸºæœ¬æ²¡æœ‰äººçœ‹ï¼Œä¼°è®¡å’Œç”¨çš„ç™½å«–åŸŸåæœ‰å…³å§ï¼Œæˆ‘ä¹Ÿä¸æ‡‚ SEO ä¼˜åŒ–ï¼Œä¹Ÿæ²¡æ—¶é—´æŠ˜è…¾è¿™äº›ï¼Œè¿˜æœ‰å°±æ˜¯æ²¡æœ‰è¯„è®ºç³»ç»Ÿï¼ˆåæ­£ä¹Ÿæ²¡äººçœ‹ï¼‰ã€‚å…¶å®æ­å»ºå¥½ä¸ªäººåšå®¢ä¹‹åï¼Œæˆ‘è¿˜æ˜¯åšæŒç”¨å¤åˆ¶ç²˜è´´çš„æ–¹å¼æŠŠåšå®¢åŒæ­¥åˆ°åšå®¢å›­åšæŒäº†ä¸€æ®µæ—¶é—´çš„ï¼Œåæ¥å¤ªæ‡’äº†ï¼Œä½œç½¢ã€‚

å°±åœ¨å‰ä¸¤å¤©ï¼Œæˆ‘åœ¨æŸ¥æ‰¾ C++ çš„å†…å­˜åˆ†å¸ƒç›¸å…³èµ„æ–™çš„æ—¶å€™ï¼Œå‘ç°äº†åšä¸» sinkinben çš„è¿™ç¯‡ [æ–‡ç« ](https://www.cnblogs.com/sinkinben/p/15475940.html)ï¼Œæˆ‘æ‰¿è®¤ï¼Œè‚¤æµ…çš„æˆ‘ä¸€ä¸‹å­è¢«ä»–çš„åšå®¢ä¸»é¢˜å¸å¼•åˆ°äº†ï¼ˆå†…å®¹åå€’æ˜¯å…¶æ¬¡äº†ï¼‰ï¼Œåœ¨ä»–çš„åšå®¢ä¸­æœ‰ç»™å‡ºä»–çš„ Github é“¾æ¥ï¼Œç‚¹è¿›å»ä¸€çœ‹ï¼Œæœç„¶æœ‰ä»–çš„åšå®¢å›­ä¸»é¢˜çš„ CSS å’Œ html æ–‡ä»¶ï¼Œæ›´æ”¹äº†ä¸€ä¸‹åšå®¢å›­ä¸»é¢˜ï¼Œçœ‹äº†ä¸€ä¸‹å®é™…æ•ˆæœï¼Œæœç„¶å¾ˆå¥½çœ‹ã€‚äºæ˜¯ï¼Œæˆ‘é‚£æŠŠæ–‡ç« åŒæ­¥å‘å¸ƒåœ¨åšå®¢å›­çš„å¿ƒåˆè ¢è ¢æ¬²åŠ¨äº†èµ·æ¥ã€‚

## åšå®¢å›­åŒæ­¥è„šæœ¬

å…¶å®æˆ‘ä¸€ç›´æœ‰åœ¨å…³æ³¨åšå®¢å›­çš„ VsCode æ’ä»¶ï¼Œä¹Ÿä½¿ç”¨è¿‡ï¼Œå…¶å®æŒºå¥½ç”¨çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªéå¸¸è‡´å‘½çš„é—®é¢˜ã€‚é‚£å°±æ˜¯æ‰§è¡Œ `hugo new xxx.md` ç”Ÿæˆçš„æ–‡æ¡£éƒ½ä¼šå¸¦æœ‰å¦‚ä¸‹å›¾çš„ Yaml Front Matter ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸å±äºæ­£æ–‡å†…å®¹ï¼ŒHugo ä¼šåŸºäºè¿™äº›ä¿¡æ¯è§£æå‡ºæœ¬æ–‡çš„æ ‡é¢˜ã€æ‰€å±åˆ†ç±»ã€æ ‡ç­¾ç­‰ä¿¡æ¯ã€‚è€Œæ’ä»¶åœ¨ä¸Šä¼ æ–‡ç« åˆ°åšå®¢å›­æ—¶ï¼Œå¹¶ä¸ä¼šè§£ææˆ–è€…å»é™¤è¿™äº›ä¿¡æ¯ï¼Œè€Œæ˜¯ä½œä¸ºæ­£æ–‡çš„ä¸€éƒ¨åˆ†ç›´æ¥ä¸Šä¼ ï¼ŒGitHub ä¸Šå·²ç»æœ‰äººæ issue äº†ï¼Œå¼€å‘è€…ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿˜æ²¡æ¥å¾—åŠä¿®æ”¹ã€‚

å› æ­¤ï¼Œå¦‚æœæƒ³ä¾¿æ·åœ°åŒæ­¥æ–‡ç« åˆ°åšå®¢å›­ï¼Œåœ¨æ’ä»¶å¼€å‘è€…åšå‡ºä¿®æ”¹ä¹‹å‰ï¼Œæˆ‘åªèƒ½å¦å¯»å‡ºè·¯ã€‚ç»è¿‡æˆ‘çš„ä¸€ç•ªæ£€ç´¢ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªåŸºæœ¬ç¬¦åˆæˆ‘éœ€æ±‚çš„å‘å¸ƒæ–‡ç« åˆ°åšå®¢å›­çš„ Python è„šæœ¬ï¼ŒåŸºç¡€æ•™ç¨‹è§è¯¥è„šæœ¬çš„ [GitHub åœ°å€](https://github.com/DeppWang/cnblogs-post)ã€‚

é¦–å…ˆï¼Œéœ€è¦æ‰§è¡Œ `conda install markdown-it-py` å’Œ `conda install mdit-py-plugins` å®‰è£…æ‰€éœ€è¦çš„æ¨¡å—ï¼Œ

é…ç½®å¥½è„šæœ¬æ–‡ä»¶ä¸­å¯¹åº”çš„æ–‡ç« è·¯å¾„ã€MetaWeblog è´¦æˆ·ä¿¡æ¯ä¹‹åï¼Œè¿è¡Œè¯¥è„šæœ¬å³å¯ï¼Œè¿è¡Œæ—¶åé¢å¯ä»¥å¸¦ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºä¸€æ¬¡æ›´æ–°æˆ–è€…å‘å¸ƒå¤šå°‘æ–‡ç« ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å‘å¸ƒæŒ‡å®šæ•°é‡çš„æœ€è¿‘ä¿®æ”¹è¿‡çš„æ–‡ç« åˆ°åšå®¢å›­ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™å‚æ•°é»˜è®¤ä¸º $1$ã€‚

æ³¨æ„ï¼Œè¿è¡Œè„šæœ¬æ—¶ï¼Œå¦‚æœç¢°åˆ° Yaml Front Matter éƒ¨åˆ†çš„ tags ä¸€æ ä¸ºç©ºçš„ `.md` æ–‡ä»¶ï¼Œè„šæœ¬ä¼šç›´æ¥ç»“æŸè¿è¡Œï¼ŒåŒæ—¶ Hugo é™åˆ¶äº† `_index.zh.md` ä¸èƒ½æœ‰ tags è¿™ä¸€æ ï¼Œå› æ­¤è¦ç‰¹åˆ«ä½œä¸€ç‚¹å¤„ç†ï¼Œä½†å…¶å®åªè¦ä¿è¯æœ€è¿‘æ›´æ–°çš„æ–‡ç« ä¸åŒ…æ‹¬ `_index.zh.md` å³å¯ã€‚

è¯¥è„šæœ¬åªæœ‰åŸæ¥åªèƒ½å¤„ç† tagsï¼Œå¯¹äº categories è¿™ä¸€æ åˆ™ä¸ä¼šå¤„ç†ï¼Œå› æ­¤æˆ‘åšäº†ä¸€ç‚¹ä¿®æ”¹ã€‚è¿™é‡Œè¦æ³¨æ„ MetaWeblog API çš„ `categories` å­—æ®µåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä½œè€…å¯¹ tags æ˜¯ä½œä¸ºå­—ç¬¦ä¸²æ¥å¤„ç†çš„ã€‚

```py
import xmlrpc.client
import ssl
import os
import sys
import logging

# logging.basicConfig(level=logging.INFO)

# è®¾ç½® ssl å¾ˆé‡è¦ï¼Œå¦åˆ™å°†æŠ¥ ssl é”™
ssl._create_default_https_context = ssl._create_unverified_context

# dict
config = {
    "user_unique_name": "zwyyy456",  # ä½ çš„ç”¨æˆ·åï¼Œç”¨äºæ‹¼æ¥æ–‡ç«  url
    "url": "https://rpc.cnblogs.com/metaweblog/zwyyy456",  # ä½ çš„ MetaWeblog è®¿é—®åœ°å€
    "username": "zwyyy456",  # ä½ çš„ç™»å½•ç”¨æˆ·åï¼Œå¯èƒ½è·Ÿä¸Šé¢çš„ä¸ä¸€è‡´
    "password": "*********",  # ä½ çš„ç™»å½•å¯†ç 
    "local_post_path": "/home/zwyyy/Documents/.../",  # ä½ çš„æœ¬åœ°åšæ–‡è·¯å¾„
}


class MetaWeblog:
    def __init__(self, url, username, password):
        self.url, self.username, self.password = url, username, password
        self.proxy = xmlrpc.client.ServerProxy(self.url)

    def getRecentPosts(self, count):
        return self.proxy.metaWeblog.getRecentPosts(
            "", self.username, self.password, count
        )

    def deletePost(self, post_id):
        return self.proxy.blogger.deletePost(
            "", post_id, self.username, self.password, True
        )

    def newPost(self, article):
        return self.proxy.metaWeblog.newPost(
            "",
            self.username,
            self.password,
            dict(
                title=article["title"],
                description=article["content"],
                categories=article["categories"],
                mt_keywords=article["tags"],
            ),
            True,
        )

    def editPost(self, post_id, article):
        return self.proxy.metaWeblog.editPost(
            post_id,
            self.username,
            self.password,
            dict(
                title=article["title"],
                description=article["content"],
                mt_keywords=article["tags"],
                categories=article["categories"],
            ),
            True,
        )


def set_article(article_path: str) -> dict:
    """æ ¹æ®æ–‡ç« è·¯å¾„è®¾ç½®æ–‡ç« ï¼ˆæ ‡é¢˜ã€æ ‡ç­¾å’Œå†…å®¹ï¼‰"""

    import re
    from markdown_it import MarkdownIt
    from mdit_py_plugins.front_matter import front_matter_plugin
    from mdit_py_plugins.footnote import footnote_plugin

    with open(article_path, "rb") as f:
        content = f.read().decode("utf-8")

    # ä½¿ç”¨åˆ†ç»„
    reg = r"(---(.|[\n])*?---)"

    p = re.compile(reg)
    headers = p.findall(content)

    logging.info("headers: %s", headers)
    if len(headers) < 1:
        raise ValueError("æ–‡ç«  %s ä¸å­˜åœ¨ header ä¿¡æ¯å—ã€Œ--- ** ---ã€ï¼Œè¯·æ£€æŸ¥ï¼" % article_path)

    # headers[0] ä¸º tuple
    header_str = headers[0][0]

    lines = header_str.split("\n")

    title, tags_categories, category = "", [], ""
    for line in lines:
        # ä¸ä½¿ç”¨':', å†æ›¿æ¢æ‰€æœ‰ç©ºæ ¼ä¸º nullï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨ä¸­è‹±æ–‡ç©ºæ ¼
        line_ele = line.split(": ")
        if line_ele[0] == "title":
            title = line_ele[1].rstrip()
            title = title.strip('"')  # å»é™¤é¦–å°¾çš„å¼•å·

        elif line_ele[0] == "tags":
            tags = line_ele[1].rstrip()
            tags = tags.replace("[", "")
            tags = tags.replace('"', "")
            tags = tags.replace("]", "")
            tags_categories.append(tags)

        # å¤„ç† categories
        elif line_ele[0] == "categories":
            category = line_ele[1].rstrip()
            category = category.replace("[", "")
            category = category.replace('"', "")
            category = category.replace("]", "")

    separator = ", "
    tags = separator.join(tags_categories)

    categories = category.split(", ")

    logging.info("tags: %s", tags)
    logging.info("categories: %s", categories)

    # åªæ›¿æ¢ç¬¬ä¸€ä¸ª
    content = content.replace(header_str, "", 1)

    md = (
        MarkdownIt()
        .use(front_matter_plugin)
        .use(footnote_plugin)
        .enable("image")
        .enable("table")
    )

    # markdown è½¬æ¢ä¸º HTML
    content = md.render(content)

    # cnblogs-markdown å±æ€§ç”¨äºä»£ç å—æ ·å¼
    content = '<div class="cnblogs-markdown">%s</div>' % content

    if title == "" or content == "" or tags == "":
        raise ValueError("æ–‡ç«  titleã€contentã€tags å‡ä¸èƒ½ä¸ºç©ºï¼›': 'åæœ‰ç©ºæ ¼ã€‚è¯·æ£€æŸ¥ï¼")

    article = {
        "title": title,
        "content": content,
        "tags": tags,
        "categories": categories,
    }
    return article


def get_local_modified_file(file_count: int):
    """è·å–æŒ‡å®šæ•°é‡çš„æœ€è¿‘ä¿®æ”¹æ–‡ç« """

    import stat
    import datetime as dt

    modified = []

    for root, sub_folders, files in os.walk(config["local_post_path"]):
        for file in files:
            try:
                unix_modified_time = os.stat(os.path.join(root, file))[stat.ST_MTIME]
                human_modified_time = dt.datetime.fromtimestamp(
                    unix_modified_time
                ).strftime("%Y%m%dT%H:%M:%S")
                filename = os.path.join(root, file)
                if os.path.splitext(filename)[1] == ".md":
                    modified.append((human_modified_time, filename))
            except:
                pass

    modified.sort(key=lambda a: a[0], reverse=True)
    return modified[0:file_count]


def judge_str_equal(str1, str2):
    """åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰"""

    str1 = str1.replace(" ", "")
    str2 = str2.replace(" ", "")
    return str1 == str2


def edit_or_new(article_path: str) -> None:
    """ç¼–è¾‘æˆ–æ–°å¢"""

    blog = MetaWeblog(config["url"], config["username"], config["password"])
    posts = blog.getRecentPosts(100)
    article = set_article(article_path)

    title = article["title"]

    # å¦‚æœå­˜åœ¨ï¼Œæ›´æ–°ï¼Œå¦åˆ™æ–°å¢ã€‚æ¥å£ä¸æä¾›æœ€è¿‘ä¿®æ”¹æ—¶é—´ï¼Œæ‰€ä»¥ä¸èƒ½è·³è¿‡
    exist_flag = 0

    for post in posts:
        # åˆ¤æ–­æ˜¯å¦å«æœ‰ç›¸åŒçš„å­—ç¬¦ï¼Œä¸ç›´æ¥ç”¨ç­‰å·
        if judge_str_equal(post["title"], title):
            status = blog.editPost(post["postid"], article)
            if status is True:
                print(
                    "æ›´æ–°æ–‡ç« ã€Œ%sã€æˆåŠŸï¼Œæ–‡ç« åœ°å€ https://www.cnblogs.com/%s/p/%s.html"
                    % (title, config["user_unique_name"], post["postid"])
                )
            exist_flag = 1
            break

    if exist_flag == 0:
        id = blog.newPost(article)
        if id is not None:
            print(
                "å‘å¸ƒæ–‡ç« ã€Œ%sã€æˆåŠŸï¼Œæ–‡ç« åœ°å€ https://www.cnblogs.com/%s/p/%s.html"
                % (title, config["user_unique_name"], id)
            )


def post(count: int) -> None:
    """å‘å¸ƒæŒ‡å®šæ•°é‡çš„æœ€æ–°ä¿®æ”¹æ–‡ç« """

    modified_files = get_local_modified_file(count)
    for modified_file in modified_files:
        edit_or_new(modified_file[1])


def delete() -> None:
    """é»˜è®¤åˆ é™¤æœ€æ–°æ–‡ç« """

    metaWeblog = MetaWeblog(config["url"], config["username"], config["password"])
    posts = metaWeblog.getRecentPosts(100)
    postid = posts[0]["postid"]
    title = posts[0]["title"]
    status = metaWeblog.deletePost(postid)
    if status is True:
        print("åˆ é™¤ã€Œ%sã€æˆåŠŸï¼" % title)
    else:
        print("åˆ é™¤ã€Œ%sã€å¤±è´¥ï¼Œæ–‡ç« ä¸å­˜åœ¨ã€‚æ–‡ç«  id ä¸ºï¼š%s" % (title, postid))


def main():
    try:
        if len(sys.argv) > 1 and sys.argv[1] == "delete":
            delete()

        elif len(sys.argv) > 1 and isinstance(int(sys.argv[1]), int):
            print("æ­£åœ¨å‘å¸ƒ ...")
            logging.info("sys.argv[1]: %s", sys.argv[1])
            post(int(sys.argv[1]))

        else:
            post(1)
    except Exception as err:
        print("é”™è¯¯æç¤ºï¼š%s", format(err))
        print("å‘å¸ƒå¤±è´¥")
        sys.exit(-1)


if __name__ == "__main__":
    main()

```

å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ‰§è¡Œä¸‰ä¸ªä¸åŒçš„ Python è„šæœ¬çš„è„šæœ¬ã€‚

```sh
python3 ./CnblogPy/tech_posts.py 6
python3 ./CnblogPy/leet_posts.py 6
python3 ./CnblogPy/blog_posts.py 6
```

## ä¿®æ”¹ä¸»é¢˜

åšä¸» sinkinben åˆ¶ä½œçš„ä¸»é¢˜å·²ç»éå¸¸å®Œå–„äº†ï¼Œæˆ‘ä¸»è¦æ˜¯é’ˆå¯¹è‡ªå·±éœ€æ±‚ä¿®æ”¹äº†ä¸€ä¸‹ `header.html`ã€‚

ä¸€æ˜¯å°† ğŸŒ³ Homeã€ğŸ“® Emailã€ğŸ¶ About è¿™ä¸‰ä¸ª `menuItem` å¯¹åº”çš„é“¾æ¥ä¿®æ”¹ä¸ºè‡ªå·±çš„ç›¸å…³é“¾æ¥ï¼Œè€Œæ˜¯æ·»åŠ äº† ğŸ·ï¸ Tag å’Œ ğŸ“‚ Category ä»¥åŠç›¸å…³çš„ `subMenuItem` é“¾æ¥ï¼Œå¹¶å°†å¤´åƒæ¢æˆäº†è‡ªå·±çš„ã€‚



